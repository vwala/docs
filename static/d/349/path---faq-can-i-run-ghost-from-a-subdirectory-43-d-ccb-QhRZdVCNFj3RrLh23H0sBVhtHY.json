{"data":{"site":{"siteMetadata":{"siteUrl":"http://ghost.local:8000","title":"vwa.la help","description":"Everything you need to know about the vwa.la influencer marketing platform."}},"ghostPost":{"title":"Can I run Ghost(Pro) from a subdirectory","slug":"can-i-run-ghost-from-a-subdirectory","featured":false,"feature_image":null,"created_at_pretty":"27 September, 2018","published_at_pretty":"27 September, 2018","updated_at_pretty":"19 November, 2018","created_at":"2018-09-27T23:05:28.000+00:00","published_at":"2018-09-27T23:07:00.000+00:00","updated_at":"2018-11-19T06:14:50.000+00:00","excerpt":"Using subdirectories with Ghost(Pro) is supported at Business plan level. Find out how to set up a subdirectory.","meta_title":"Can I run Ghost(Pro) from a subdirectory? - FAQ","meta_description":"Using subdirectories with Ghost(Pro) is supported at Business plan level. Find out how to set up a subdirectory using this tutorial.","og_description":null,"og_image":null,"og_title":null,"twitter_description":null,"twitter_image":null,"twitter_title":null,"authors":[{"name":"Sarah Frantz","slug":"sarah","bio":null,"profile_image":"//www.gravatar.com/avatar/930a564053be3c38824dfee3e89d2074?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null}],"primary_author":{"name":"Sarah Frantz","slug":"sarah","bio":null,"profile_image":"//www.gravatar.com/avatar/930a564053be3c38824dfee3e89d2074?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null},"primary_tag":{"name":"Ghost(Pro)","slug":"ghost-pro","description":"Commonly asked questions and support for Ghost(Pro) customers!","feature_image":null,"meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","meta_title":"GhostPro FAQs","visibility":"public"},"tags":[{"name":"Ghost(Pro)","slug":"ghost-pro","description":"Commonly asked questions and support for Ghost(Pro) customers!","feature_image":null,"meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","meta_title":"GhostPro FAQs","visibility":"public"},{"name":"#faq","slug":"hash-faq","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"internal"}],"plaintext":"If you have an existing site — for example a shop, or a static site hosted\nelsewhere — Ghost can be run from a separate location e.g. yourdomain.com/blog \notherwise known as a subdirectory.\n\nSubdirectory installs are supported at the Business plan level\n[https://ghost.org/pricing/]  and require a custom nginx or apache configuration\nthat follows reverse proxy rules. In addition to a proxy, you must also contact \nsupport@ghost.org  to indicate the subdirectory path to be used with your\npublication.\n\nReverse proxy rules\nHere's a guide for setting up reverse proxy rules:\n\n1. Provide a certificate & serve HTTPS traffic.\nOnly HTTPS traffic is supported.\n\n2. Redirect non-HTTPS traffic to HTTPS.\nIt's more performant for this to be configured at the proxy level.\n\n3. Proxy to your ghost.io subdomain, leaving it set as the HOST header.\nRequired to get through our security layer.\n\n4. Have an X-Forwarded-Host header that matches the custom domain in\nmy.ghost.org.\nWithout this, your blog will redirect to your ghost.io subdomain, causing a\nloop.\n\n5. Include the X-Forwarded-Proto header set to https not http.\nWithout this your blog will redirect to https, causing a loop.\n\n6. Include the X-Forwarded-For header, populated with the remote IP of the\noriginal request.\nWithout this, we aren't able to detect spam traffic patterns and your site risks\nbeing rate limited or incorrectly restricted.\n\nExample configurations\n * Nginx [https://gist.github.com/ErisDS/3ee9f27bcdb43522f0be]\n * Apache [https://gist.github.com/ErisDS/3b475f84a1163bbb7579021abfff1abe]\n\nVerification\nTo ensure your proxy is correctly configured, check the headers using the custom\nheader X-Ghost-Proxy: true.\n\nFor example: curl -IL -H 'x-ghost-proxy:true' https://<your domain\nhere>/<subdirectory>  \n\nIf your proxy is correct you’ll see a response header of x-ghost-proxy set to\nVALID. If an invalid header is detected, you will see INVALID next to it.","html":"<p>If you have an existing site — for example a shop, or a static site hosted elsewhere — Ghost can be run from a separate location e.g. <code>yourdomain.com/blog</code> otherwise known as a subdirectory.</p><p>Subdirectory installs are supported at the <a href=\"https://ghost.org/pricing/\" rel=\"noreferrer nofollow noopener\">Business plan level</a> and require a custom nginx or apache configuration that follows reverse proxy rules. In addition to a proxy, you must also contact <a href=\"mailto:support@ghost.org\" rel=\"noreferrer nofollow noopener\">support@ghost.org</a> to indicate the subdirectory path to be used with your publication.</p><h2 id=\"reverse-proxy-rules\">Reverse proxy rules</h2><p>Here's a guide for setting up reverse proxy rules:</p><p><strong>1. Provide a certificate &amp; serve HTTPS traffic.</strong><br>Only HTTPS traffic is supported.</p><p><strong>2. Redirect non-HTTPS traffic to HTTPS.</strong><br>It's more performant for this to be configured at the proxy level.</p><p><strong>3. Proxy to your ghost.io subdomain, leaving it set as the HOST header.</strong><br>Required to get through our security layer.</p><p><strong>4. Have an X-Forwarded-Host header that matches the custom domain in my.ghost.org.</strong><br>Without this, your blog will redirect to your ghost.io subdomain, causing a loop.</p><p><strong>5. Include the X-Forwarded-Proto header set to https not http.</strong><br>Without this your blog will redirect to https, causing a loop.</p><p><strong>6. Include the X-Forwarded-For header, populated with the remote IP of the original request.</strong><br>Without this, we aren't able to detect spam traffic patterns and your site risks being rate limited or incorrectly restricted.</p><h2 id=\"example-configurations\"><strong>Example configurations</strong></h2><ul><li><a href=\"https://gist.github.com/ErisDS/3ee9f27bcdb43522f0be\" rel=\"noreferrer nofollow noopener\">Nginx</a></li><li><a href=\"https://gist.github.com/ErisDS/3b475f84a1163bbb7579021abfff1abe\" rel=\"noreferrer nofollow noopener\">Apache</a></li></ul><h2 id=\"verification\">Verification</h2><p>To ensure your proxy is correctly configured, check the headers using the custom header X-Ghost-Proxy: true.</p><p>For example: <code>curl -IL -H 'x-ghost-proxy:true' https://&lt;your domain here&gt;/&lt;subdirectory&gt;</code> </p><p>If your proxy is correct you’ll see a response header of x-ghost-proxy set to VALID. If an invalid header is detected, you will see INVALID next to it. </p>","custom_template":null,"url":"https://docs.ghost.io/can-i-run-ghost-from-a-subdirectory/","uuid":"ab57bf82-de3d-49c3-b98f-f31df65f0699","page":false,"codeinjection_foot":"","codeinjection_head":"","comment_id":"5bad6238f193d500bfd5b42a"}},"pageContext":{"slug":"can-i-run-ghost-from-a-subdirectory","relatedPosts":[{"node":{"slug":"hover-domain-setup-guide","title":"Hover domain setup guide","url":"/faq/hover-domain-setup-guide/","published_at":"2018-10-10T14:24:48.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"GhostPro FAQs","meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"google-domain-setup-guide","title":"Google domain setup guide","url":"/faq/google-domain-setup-guide/","published_at":"2018-10-08T21:55:14.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"GhostPro FAQs","meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"using-custom-domains","title":"Using Custom Domains","url":"/faq/using-custom-domains/","published_at":"2018-10-08T10:01:52.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"GhostPro FAQs","meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"godaddy-domain-setup-guide","title":"GoDaddy domain setup guide","url":"/faq/godaddy-domain-setup-guide/","published_at":"2018-10-05T18:09:10.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"GhostPro FAQs","meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"cloudflare-custom-domain-setup","title":"Cloudflare domain setup guide","url":"/faq/cloudflare-custom-domain-setup/","published_at":"2018-10-04T15:30:03.000+00:00","feature_image":null,"tags":[{"slug":"ghost-pro","name":"Ghost(Pro)","description":"Commonly asked questions and support for Ghost(Pro) customers!","meta_title":"GhostPro FAQs","meta_description":"Commonly asked questions and support for Ghost(Pro) premium hosted customers!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}}],"section":"faq"}}