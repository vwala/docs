{"data":{"site":{"siteMetadata":{"siteUrl":"http://ghost.local:8000","title":"vwa.la help","description":"Everything you need to know about the vwa.la influencer marketing platform."}},"ghostPost":{"title":"Upgrade to Ghost 2.0","slug":"upgrade-to-ghost-2-0","featured":false,"feature_image":null,"created_at_pretty":"13 October, 2018","published_at_pretty":"16 October, 2018","updated_at_pretty":"30 October, 2018","created_at":"2018-10-13T10:58:25.000+00:00","published_at":"2018-10-16T03:52:42.000+00:00","updated_at":"2018-10-30T04:11:25.000+00:00","excerpt":"How to upgrade to Ghost 2.0 - with minimal breaking changes and a smooth upgrade process via the Ghost-CLI tool! ","meta_title":"Upgrade to Ghost 2.0 - Tutorial","meta_description":"A guide to upgrading to Ghost 2.0 for self-hosted developers managing a Ghost publication!","og_description":null,"og_image":null,"og_title":null,"twitter_description":null,"twitter_image":null,"twitter_title":null,"authors":[{"name":"Kym Ellis","slug":"kym","bio":"Technical marketing lead","profile_image":"//www.gravatar.com/avatar/65b8e98952305f0ae0f90c7439718680?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null}],"primary_author":{"name":"Kym Ellis","slug":"kym","bio":"Technical marketing lead","profile_image":"//www.gravatar.com/avatar/65b8e98952305f0ae0f90c7439718680?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null},"primary_tag":{"name":"Self-hosting","slug":"self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null,"meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","visibility":"public"},"tags":[{"name":"Self-hosting","slug":"self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null,"meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","visibility":"public"},{"name":"#faq","slug":"hash-faq","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"internal"}],"plaintext":"Ghost 2.0 was released in September 2018 and the second major upgrade since the\nplatform launched. This update includes a new editor, a flexible configuration\nlayer called dynamic routing, and lots of exciting new features\n[https://blog.ghost.org/2-0/]. \n\nThere are minimal breaking changes for the Ghost 2.0 upgrade, which runs\nsmoothly using ghost-cli. \n\nThis guide is useful for all self-hosted Ghost users. If you are using \nGhost(Pro) [https://ghost.org/pricing/]  then you are automatically upgraded to\nthe latest version of Ghost. Why upgrade to 2.0?\nUsing the latest version of Ghost is recommended to ensure that your site is\nsecure and so that you have access to all of the latest features inside Ghost.\n\nIf you are still running a Ghost LTS version (0.x), upgrade to Ghost 1.0 before\nupgrading to 2.0 — follow the upgrading to Ghost 1.0 guide\n[https://docs.ghost.org/faq/upgrade-to-ghost-1-0/]. Here’s the current version\nhistory and end of life support [https://docs.ghost.org/faq/major-versions-lts/]\n.\n\n\n--------------------------------------------------------------------------------\n\nPrerequisites\nIt is only possible to upgrade to Ghost 2.0 from versions 1.0 or higher and the\nlatest Ghost CLI version is required to complete the upgrade. Here's a breakdown\nof the migration steps:\n\n 1. Prepare your theme\n 2. Make a backup\n 3. Install the latest Ghost CLI version\n 4. Update Ghost\n\n\n--------------------------------------------------------------------------------\n\nPrepare your theme\nThe new editor in Ghost 2.0 comes with powerful rich editing features that\nrequire additional CSS in your theme. There are minimal breaking changes to\nthemes which will require some attention prior to upgrading to 2.0.\n\nCheck theme compatibility using gscan\nThe fastest way to check your theme compatibility is using the tool gscan\n[https://gscan.ghost.org]. It allows you to upload a zip file of your current\ntheme to check for errors, deprecations and other compatibility issues.\n\n 1. Download your current active theme as a .zip from the design settings page\n    in Ghost admin\n 2. Upload this file on the gscan page [https://gscan.ghost.org]\n 3. Select 2.0.0 as the Ghost version to check your theme for this migration\n\nThe tool lists all errors and provide a full explanation and description of how\nto update your theme. All items listed as “must fix” are required to be updated\nwithin your theme for the 2.0.0 migration. Items listed as “consider fixing” are\nrecommended to ensure future upgrades are smoother. \n\nFor a full overview of the required theme support for the latest version of the\nGhost Editor, read the handlebars theme documentation\n[https://docs.ghost.org/api/handlebars-themes/content/].\n\nThe supported Ghost 2.0 migration also runs gscan in the background to check if\nyour theme is compatible before allowing the upgrade. Ensure your theme is\nupdated and uploaded to your site in Ghost admin before proceeding.\n--------------------------------------------------------------------------------\n\nBackup your content\nThe recommended Ghost 2.0 upgrade using ghost-cli  is designed to be pain free,\nbut we always recommend making a backup of your content before any major\nupgrades, particularly if you are running any form of custom install. It takes\nless than two minutes to create a full backup of your site content, so make sure\nyou follow this step.\n\nJSON export\nRetrieve an up-to-date JSON export from the Ghost admin in the labs section,\nwhich can be accessed at yourdomain.com/ghost/settings/labs/. This downloads a\nJSON export file that you can save in case of emergencies.\n\nContent folder backup\nAll user-provided data such as images and themes exist in the /content/  folder.\n\nWe strongly recommend making a copy of these files. To do this run the following\ncommand on your sever:\n\ncp -r content /tmp/content-backup\n\n\n\n--------------------------------------------------------------------------------\n\nInstall the latest Ghost CLI version\nThe Ghost 2.0 upgrade requires version 1.9.0 or higher of Ghost-CLI.\n\nIf you followed the supported install guide to production, the server setup has\na single system-wide version of node.js. The install and update command for \nghost-cli  can be used:\n\nsudo npm i -g ghost-cli@latest\n\n\nor if you used yarn:\n\nsudo yarn global add ghost-cli@latest\n\n\n\n--------------------------------------------------------------------------------\n\nUpdate Ghost\nIn your terminal cd into your publication’s directory and run the update\ncommand: ghost update. Ghost CLI checks that everything is ready for the upgrade\nand inform you if there are any extra steps required. \n\nOnce all checks have been passed the upgrade installs and you’ll be running\nGhost 2.0. \n\nChecking your theme ✅\nThe CLI will check your active theme for compatibility during the update\nprocess. Providing you followed the steps within this guide, you should see: \n\nChecking theme compatibility for Ghost 2.0.0\n\n✔ Your theme is compatible.\n\nVisit the demo post at http://localhost:2370/p/a8501e8d-0d43-49ae-81b2-e5031c98d952/ to see how your theme looks like in Ghost 2.0\nYou can also check theme compatibility at https://gscan.ghost.org\n\n? Are you sure you want to proceed with migrating to Ghost 2.0.0? (Y/n)\n\n\nOnce the migration is accepted, all existing posts have the <div\nclass=\"kg-card-markdown\">  wrapper element removed from the {{content}}  output.\n \n\nWe highly recommend opening the demo post URL to perform a final check to make\nsure the post displays as expected before proceeding with the migration. \n\n\n--------------------------------------------------------------------------------\n\nWhat to do when an upgrade fails\nThe most common reason for a failed upgrade is running out of memory. Ensure you\nhave enough memory or configure swap memory on your server. If your install\nfails and you can't find a specific solution you run ghost uninstall and then\ntry ghost install again.\n\nGhost accepts two optional flags for the ghost update  command:\n\nForce\nIf ghost update fails, the first thing to try is ghost update --force  to retry\nthe update.\n\nRollback\nIf your ghost install is in a broken state after updating, you can use\nghost update --rollback  to get back to the previous stable version.\n\nOnce you've stabilised and resolved any underlying problems, go into /version \nand remove the broken version. Then run ghost update  again. Use ghost --version \n to see what version is currently being used.\n\nIf you run into any other errors, use the search function on this site to find\ntroubleshooting guides for common issues, or head to the community forum\n[https://forum.ghost.org/].\n\n\n--------------------------------------------------------------------------------\n\nSummary\nFollowing this guide you have upgraded to Ghost 2.0 using the Ghost CLI, after\nmaking any necessary changes to your theme. You now have access to all of the\nfeatures inside Ghost 2.0.","html":"<p>Ghost 2.0 was released in September 2018 and the second major upgrade since the platform launched. This update includes a new editor, a flexible configuration layer called <em>dynamic routing</em>, and lots of exciting <a href=\"https://blog.ghost.org/2-0/\" rel=\"noreferrer nofollow noopener\">new features</a>. </p><p>There are minimal breaking changes for the Ghost 2.0 upgrade, which runs smoothly using <code>ghost-cli</code>. </p><blockquote><em>This guide is useful for all self-hosted Ghost users. If you are using <a href=\"https://ghost.org/pricing/\" rel=\"noreferrer nofollow noopener\"><strong>Ghost(Pro)</strong></a><strong> </strong>then you are automatically upgraded to the latest version of Ghost. </em></blockquote><h3 id=\"why-upgrade-to-2-0\">Why upgrade to 2.0?</h3><p>Using the latest version of Ghost is recommended to ensure that your site is secure and so that you have access to all of the latest features inside Ghost.</p><p>If you are still running a Ghost LTS version (0.x), upgrade to Ghost 1.0 before upgrading to 2.0 — follow the <a href=\"https://docs.ghost.org/faq/upgrade-to-ghost-1-0/\">upgrading to Ghost 1.0 guide</a>. Here’s the <a href=\"https://docs.ghost.org/faq/major-versions-lts/\">current version history and end of life support</a>.</p><hr><h2 id=\"prerequisites\">Prerequisites</h2><p>It is only possible to upgrade to Ghost 2.0 from versions 1.0 or higher and the latest Ghost CLI version is required to complete the upgrade. Here's a breakdown of the migration steps:</p><ol><li>Prepare your theme</li><li>Make a backup</li><li>Install the latest Ghost CLI version</li><li>Update Ghost</li></ol><hr><h2 id=\"prepare-your-theme\">Prepare your theme</h2><p>The new editor in Ghost 2.0 comes with powerful rich editing features that require additional CSS in your theme. There are minimal breaking changes to themes which will require some attention prior to upgrading to 2.0.</p><h3 id=\"check-theme-compatibility-using-gscan\">Check theme compatibility using <code>gscan</code></h3><p>The fastest way to check your theme compatibility is using the tool <a href=\"https://gscan.ghost.org\" rel=\"noreferrer nofollow noopener\">gscan</a>. It allows you to upload a zip file of your current theme to check for errors, deprecations and other compatibility issues.</p><ol><li>Download your current active theme as a .zip from the design settings page in Ghost admin</li><li>Upload this file on the <a href=\"https://gscan.ghost.org\" rel=\"noreferrer nofollow noopener\">gscan page</a></li><li>Select 2.0.0 as the Ghost version to check your theme for this migration</li></ol><p>The tool lists all errors and provide a full explanation and description of how to update your theme. All items listed as “must fix” are required to be updated within your theme for the 2.0.0 migration. Items listed as “consider fixing” are recommended to ensure future upgrades are smoother. </p><p>For a full overview of the required theme support for the latest version of the Ghost Editor, read the <a href=\"https://docs.ghost.org/api/handlebars-themes/content/\">handlebars theme documentation</a>.</p><blockquote><em>The supported Ghost 2.0 migration also runs gscan in the background to check if your theme is compatible before allowing the upgrade. Ensure your theme is updated and uploaded to your site in Ghost admin before proceeding.</em></blockquote><hr><h2 id=\"backup-your-content\">Backup your content</h2><p>The recommended Ghost 2.0 upgrade using <code>ghost-cli</code> is designed to be pain free, but we always recommend making a backup of your content before any major upgrades, particularly if you are running any form of custom install. It takes less than two minutes to create a full backup of your site content, so make sure you follow this step.</p><h3 id=\"json-export\">JSON export</h3><p>Retrieve an up-to-date JSON export from the Ghost admin in the labs section, which can be accessed at <code>yourdomain.com/ghost/settings/labs/</code>. This downloads a JSON export file that you can save in case of emergencies.</p><h3 id=\"content-folder-backup\">Content folder backup</h3><p>All user-provided data such as images and themes exist in the <code>/content/</code> folder.</p><p>We strongly recommend making a copy of these files. To do this run the following command on your sever:</p><pre><code class=\"language-bash\">cp -r content /tmp/content-backup\n</code></pre>\n<hr><h2 id=\"install-the-latest-ghost-cli-version\">Install the latest Ghost CLI version</h2><p>The Ghost 2.0 upgrade requires version 1.9.0 or higher of Ghost-CLI.</p><p>If you followed the supported install guide to production, the server setup has a single system-wide version of node.js. The install and update command for <br><code>ghost-cli</code> can be used:</p><pre><code class=\"language-bash\">sudo npm i -g ghost-cli@latest\n</code></pre>\n<p>or if you used yarn:</p><pre><code class=\"language-bash\">sudo yarn global add ghost-cli@latest\n</code></pre>\n<hr><h2 id=\"update-ghost\">Update Ghost</h2><p>In your terminal cd into your publication’s directory and run the update command: <code>ghost update</code>. Ghost CLI checks that everything is ready for the upgrade and inform you if there are any extra steps required. </p><p>Once all checks have been passed the upgrade installs and you’ll be running Ghost 2.0. </p><h3 id=\"checking-your-theme-\">Checking your theme ✅</h3><p>The CLI will check your active theme for compatibility during the update process. Providing you followed the steps within this guide, you should see: </p><pre><code class=\"language-bash\">Checking theme compatibility for Ghost 2.0.0\n\n✔ Your theme is compatible.\n\nVisit the demo post at http://localhost:2370/p/a8501e8d-0d43-49ae-81b2-e5031c98d952/ to see how your theme looks like in Ghost 2.0\nYou can also check theme compatibility at https://gscan.ghost.org\n\n? Are you sure you want to proceed with migrating to Ghost 2.0.0? (Y/n)\n</code></pre>\n<p>Once the migration is accepted, all existing posts have the <code>&lt;div class=\"kg-card-markdown\"&gt;</code> wrapper element removed from the <code>{{content}}</code> output. </p><p>We highly recommend opening the demo post URL to perform a final check to make sure the post displays as expected before proceeding with the migration. </p><hr><h2 id=\"what-to-do-when-an-upgrade-fails\">What to do when an upgrade fails</h2><p>The most common reason for a failed upgrade is running out of memory. Ensure you have enough memory or configure swap memory on your server. If your install fails and you can't find a specific solution you run ghost uninstall and then try ghost install again.</p><p>Ghost accepts two optional flags for the <code>ghost update</code> command:</p><h3 id=\"force\">Force</h3><p>If ghost update fails, the first thing to try is <code>ghost update --force</code> to retry the update.</p><h3 id=\"rollback\">Rollback</h3><p>If your ghost install is in a broken state after updating, you can use<br><code>ghost update --rollback</code> to get back to the previous stable version.</p><p>Once you've stabilised and resolved any underlying problems, go into <code>/version</code> and remove the broken version. Then run <code>ghost update</code> again. Use <code>ghost --version</code> to see what version is currently being used.</p><p>If you run into any other errors, use the search function on this site to find troubleshooting guides for common issues, or head to the community <a href=\"https://forum.ghost.org/\">forum</a>.</p><hr><h2 id=\"summary\">Summary</h2><p>Following this guide you have upgraded to Ghost 2.0 using the Ghost CLI, after making any necessary changes to your theme. You now have access to all of the features inside Ghost 2.0. </p>","custom_template":null,"url":"https://docs.ghost.io/upgrade-to-ghost-2-0/","uuid":"4218bd07-3dc3-4abc-ac04-3b20128a9625","page":false,"codeinjection_foot":"","codeinjection_head":"","comment_id":"5bc1cfd194250c00bf9d3b75"}},"pageContext":{"slug":"upgrade-to-ghost-2-0","relatedPosts":[{"node":{"slug":"change-configured-site-url","title":"How do I change my configured site URL?","url":"/faq/change-configured-site-url/","published_at":"2019-01-18T15:35:27.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"clustering-sharding-multi-server","title":"Clustering, sharding and other multi-server setups","url":"/faq/clustering-sharding-multi-server/","published_at":"2018-10-17T03:28:49.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"upgrade-to-ghost-1-0","title":"Upgrade to Ghost 1.0","url":"/faq/upgrade-to-ghost-1-0/","published_at":"2018-10-16T04:02:37.000+00:00","feature_image":null,"tags":[{"slug":"self-hosting","name":"Self-hosting","description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","meta_title":"Self Hosting FAQs","meta_description":"Commonly asked questions, upgrade information and guides for developers who are self-hosting an instance of Ghost!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"filter-property-routes-yaml","title":"Filter property not working","url":"/faq/filter-property-routes-yaml/","published_at":"2018-10-10T09:06:05.000+00:00","feature_image":null,"tags":[{"slug":"errors","name":"Errors","description":"Troubleshoot common errors and issues for the open source Ghost publishing platform!","meta_title":"Troubleshooting Ghost","meta_description":"Troubleshoot common errors and issues for the open source Ghost publishing platform!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"using-cloudflare-with-ghost","title":"Using Cloudflare with Ghost","url":"/faq/using-cloudflare-with-ghost/","published_at":"2018-10-09T12:31:37.000+00:00","feature_image":null,"tags":[{"slug":"errors","name":"Errors","description":"Troubleshoot common errors and issues for the open source Ghost publishing platform!","meta_title":"Troubleshooting Ghost","meta_description":"Troubleshoot common errors and issues for the open source Ghost publishing platform!","feature_image":null},{"slug":"hash-faq","name":"#faq","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}}],"section":"faq"}}