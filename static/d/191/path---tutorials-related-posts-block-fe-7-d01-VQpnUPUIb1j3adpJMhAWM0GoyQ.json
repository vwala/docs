{"data":{"site":{"siteMetadata":{"siteUrl":"http://ghost.local:8000","title":"vwa.la help","description":"Everything you need to know about the vwa.la influencer marketing platform."}},"ghostPost":{"title":"How to build a related posts block","slug":"related-posts-block","featured":false,"feature_image":null,"created_at_pretty":"07 November, 2018","published_at_pretty":"08 November, 2018","updated_at_pretty":"08 November, 2018","created_at":"2018-11-07T07:08:59.000+00:00","published_at":"2018-11-08T10:34:49.000+00:00","updated_at":"2018-11-08T10:52:14.000+00:00","excerpt":"Learn how to build and deploy a related posts block using partials to keep readers engaged with your content!","meta_title":"How To Build A Related Posts Block in Ghost - Tutorials","meta_description":"Learn how to build and deploy a related posts block in your Ghost theme using partials & keep readers engaged with your content! üíÖüèª","og_description":null,"og_image":null,"og_title":null,"twitter_description":null,"twitter_image":null,"twitter_title":null,"authors":[{"name":"Kym Ellis","slug":"kym","bio":"Technical marketing lead","profile_image":"//www.gravatar.com/avatar/65b8e98952305f0ae0f90c7439718680?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null}],"primary_author":{"name":"Kym Ellis","slug":"kym","bio":"Technical marketing lead","profile_image":"//www.gravatar.com/avatar/65b8e98952305f0ae0f90c7439718680?s=250&d=mm&r=x","twitter":null,"facebook":null,"website":null},"primary_tag":{"name":"Themes","slug":"themes","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"public"},"tags":[{"name":"Themes","slug":"themes","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"public"},{"name":"#tutorial","slug":"hash-tutorial","description":null,"feature_image":null,"meta_description":null,"meta_title":null,"visibility":"internal"}],"plaintext":"Improve your reader engagement with a related posts block for your site using\nthe flexible theme layer in Ghost.\n\nOverview\nAdding a related posts block on each post on your site is a great way to ensure\nyour readers have a positive experience and encourages them to move around your\nsite content once they land on a post.\n\nThis is possible using the Handlebars theme layer by creating a partial template\nand utilising the {{#get}}  helper\n[https://docs.ghost.org/api/handlebars-themes/helpers/get/]. This tutorial will\nwalk you through building your own related posts block ready for deployment on\nyour Ghost publication ‚ú®\n\nAdd a partial reference to default.hbs\nThe first steps involve creating a new partial template. The /partials \ndirectory in a Ghost theme is optional, but it's a useful tool to create blocks\nof HTML that will be used between multiple templates in your theme. This reduces\ncode duplication and makes the building blocks of your theme easier to work\nwith. \n\nFirst of all, create a reference to your new partial in the relevant template(s)\nwhere you would like the block to appear, for example:\n\n...\n{{ghost_head}}\n</head>\n<body class=\"{{body_class}}\">\n  <section class=\"blog-content\">\n    {{{body}}}\n  </section>\n\n  {{> sidebar}}\n  \n  {{ghost_foot}}\n</body>\n\n\nFor the purposes of this tutorial, we're calling our partial \"sidebar\"  and\nreferencing it with {{> sidebar}}  in the defaut.hbs template. You can call your\npartial anything you like so long as it makes sense to you. In this example, you\ncan imagine that the related posts block is intended to appear in the sidebar of\nthe theme üôÉ\n\nThis reference will usually be placed in the default.hbs, post.hbs  or page.hbs.\nThe great thing about working with partials is that they're reusable, so if you\nneed to use this content block on various templates or parts of your site, then\nyou can!\n\nCreate a partial template and add some HTML\nNext we need to create a partial template in partials/  and add some HTML to\ncreate the skeleton of our related posts block. Here's an example which exists\nin partials/sidebar.hbs:\n\n<aside class=\"blog-sidebar\">\n  <section class=\"recent-posts\">\n    <h3>Recent posts</h3>\n    <ol>\n      <li><a href=\"\"></a></li>\n    </ol>\n  </section>\n  \n  <section class=\"featured-posts\">\n    <h3>Featured posts</h3>\n    <ol>\n      <li><a href=\"\"></a></li>\n    </ol>\n  </section>\n</aside>\n\n\nFetch data to be rendered in your related posts block\nIn a Ghost theme each page belongs to a context\n[https://docs.ghost.org/api/handlebars-themes/context/], and each context\nprovides some essential data by default. When you need extra dynamic data other\nthan what the context provides, you can fetch it using the {{#get}}  helper.\nThis helper makes a custom query to the Ghost API to fetch publicly available\ndata - which is why it's so useful when used as a block helper. \n\nIt's possible to fetch a variety of data for your related posts block depending\non your requirements. Here's the most popular configurations: \n\n * Related posts by topic\n * Recently published posts\n * Featured posts\n\nAll of these configurations for a related posts block can be achieved using the \n{{#get}}  helper and are documented below:\n\nRelated posts\nThe most effective way to show posts that are related by topic in your related\nposts block is to filter by tag. For example:\n\n{{#get \"posts\" limit=\"5\" filter=\"tags:[{{post.tags}}]+id:-{{post.id}}\" include=\"tags\" as |related|}}\n{{/get}}\n\n\nThis provides up to 5 related posts that match the tags of the post the reader\nis currently on, and excludes the current post from appearing in the featured\nblock. Since these are related posts, block parameter syntax is used to name the\ndata with as |related|.\n\nRecently published posts\nThe call to the get helper to feature your most recently published posts looks\nlike this: {{#get \"posts\" limit=\"3\"}}. It's also useful to exclude the current\npost with a filter here too, and add the block parameter syntax for naming: \n\n{{#get \"posts\" limit=\"3\" filter=\"id:-{{post.id}}\" as |recents|}}\n\n\nFeatured posts\nIf you want to call posts that have been checked as featured from the Ghost\neditor in your block, use a filter parameter:\n\n{{#get \"posts\" filter=\"featured:true+id:-{{post.id}}\" limit=\"3\" as |featured|}}\n\n\nTip üí° the resource must always come first, and the block parameter to name the\ndata must be last ‚Äì but parameters like limit  and filter  can be added in any\norder.Use the {{foreach}}  helper\nNow that you understand how to fetch the relevant data using one of the methods\nabove in your partial template, the final step is to use the {{foreach}}  helper\n[https://docs.ghost.org/api/handlebars-themes/helpers/foreach/]  to iterate the\nposts in your related posts block. For example, plugging this into the \npartials/sidebar.hbs  for featured posts will look like this: \n\n{{#get \"posts\" filter=\"featured:true\" limit=\"3\" as |featured|}}\n<section class=\"featured-posts\">\n  <h3>Featured posts</h3>\n  <ol>\n    {{#foreach featured}}\n    <li><a href=\"{{url}}\">{{title}}</a></li>\n    {{/foreach}}\n  </ol>\n</section>\n{{/get}}\n\n\nUsing {{else}}  as a fallback\nIn the event that no posts match the filter, utilise the {{else}}  helper  to\nrender alternative content and ensure that your readers aren't staring at an\nempty space. For example: \n\n{{#get \"posts\" filter=\"featured:true\" limit=\"3\" as |featured|}}\n<section class=\"featured-posts\">\n  <h3>Featured posts</h3>\n  <ol>\n    {{#foreach featured}}\n    <li><a href=\"{{url}}\">{{title}}</a></li>\n    {{/foreach}}\n  </ol>\n</section>\n{{else}}\n<p>Content for a fallback when no related posts are available.</p>\n{{/get}}\n\n\nThis is just an example. You could feature pretty much anything here as a\nfallback... link to a static page on your site, add some text that describes\nwhat your publication is all about or insert your favourite meme - you do you!\n\nImplement your new templates\nOnce you've finished creating your partial template and made any necessary\nadjustments to your CSS files, update your site's active theme to get it up and\nrunning. The easiest way to implement a new theme is to upload the .zip  file in\nGhost Admin under the Design Settings menu. \n\nSummary\nYou've completed the tutorial and hopefully deployed a neat featured image block\non your Ghost publication. Your new content block is a partial Handlebars\ntemplate which can be used across any template in your theme when required. \n\nDon't forget you can use the Handlebars documentation\n[https://docs.ghost.org/api/handlebars-themes/]  anytime to learn more about\nthemes and access a full reference list of available helpers.","html":"<p>Improve your reader engagement with a related posts block for your site using the flexible theme layer in Ghost.</p><h3 id=\"overview\">Overview</h3><p>Adding a related posts block on each post on your site is a great way to ensure your readers have a positive experience and encourages them to move around your site content once they land on a post.</p><p>This is possible using the Handlebars theme layer by creating a partial template and utilising the <code>{{#get}}</code> <a href=\"https://docs.ghost.org/api/handlebars-themes/helpers/get/\">helper</a>. This tutorial will walk you through building your own related posts block ready for deployment on your Ghost publication ‚ú®</p><h2 id=\"add-a-partial-reference-to-default-hbs\">Add a partial reference to <code>default.hbs</code></h2><p>The first steps involve creating a new partial template. The <code>/partials</code> directory in a Ghost theme is optional, but it's a useful tool to create blocks of HTML that will be used between multiple templates in your theme. This reduces code duplication and makes the building blocks of your theme easier to work with. </p><p>First of all, create a reference to your new partial in the relevant template(s) where you would like the block to appear, for example:</p><pre><code class=\"language-handlebars\">...\n{{ghost_head}}\n&lt;/head&gt;\n&lt;body class=&quot;{{body_class}}&quot;&gt;\n  &lt;section class=&quot;blog-content&quot;&gt;\n    {{{body}}}\n  &lt;/section&gt;\n\n  {{&gt; sidebar}}\n  \n  {{ghost_foot}}\n&lt;/body&gt;\n</code></pre>\n<p>For the purposes of this tutorial, we're calling our partial \"<em>sidebar\"</em> and referencing it with <code>{{&gt; sidebar}}</code> in the defaut.hbs template. You can call your partial anything you like so long as it makes sense to you. In this example, you can imagine that the related posts block is intended to appear in the sidebar of the theme üôÉ</p><p>This reference will usually be placed in the <code>default.hbs</code>, <code>post.hbs</code> or <code>page.hbs</code>. The great thing about working with partials is that they're reusable, so if you need to use this content block on various templates or parts of your site, then you can!</p><h2 id=\"create-a-partial-template-and-add-some-html\">Create a partial template and add some HTML</h2><p>Next we need to create a partial template in <code>partials/</code> and add some HTML to create the skeleton of our related posts block. Here's an example which exists in <code>partials/sidebar.hbs</code>:</p><pre><code class=\"language-handlebars\">&lt;aside class=&quot;blog-sidebar&quot;&gt;\n  &lt;section class=&quot;recent-posts&quot;&gt;\n    &lt;h3&gt;Recent posts&lt;/h3&gt;\n    &lt;ol&gt;\n      &lt;li&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/li&gt;\n    &lt;/ol&gt;\n  &lt;/section&gt;\n  \n  &lt;section class=&quot;featured-posts&quot;&gt;\n    &lt;h3&gt;Featured posts&lt;/h3&gt;\n    &lt;ol&gt;\n      &lt;li&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/li&gt;\n    &lt;/ol&gt;\n  &lt;/section&gt;\n&lt;/aside&gt;\n</code></pre>\n<h2 id=\"fetch-data-to-be-rendered-in-your-related-posts-block\">Fetch data to be rendered in your related posts block</h2><p>In a Ghost theme each page belongs to a <a href=\"https://docs.ghost.org/api/handlebars-themes/context/\">context</a>, and each context provides some essential data by default. When you need extra dynamic data other than what the context provides, you can fetch it using the <code>{{#get}}</code> helper. This helper makes a custom query to the Ghost API to fetch publicly available data - which is why it's so useful when used as a block helper. </p><p>It's possible to fetch a variety of data for your related posts block depending on your requirements. Here's the most popular configurations: </p><ul><li>Related posts by topic</li><li>Recently published posts</li><li>Featured posts</li></ul><p>All of these configurations for a related posts block can be achieved using the <code>{{#get}}</code> helper and are documented below:</p><h3 id=\"related-posts\">Related posts</h3><p>The most effective way to show posts that are related by topic in your related posts block is to filter by tag. For example:</p><pre><code class=\"language-handlebars\">{{#get &quot;posts&quot; limit=&quot;5&quot; filter=&quot;tags:[{{post.tags}}]+id:-{{post.id}}&quot; include=&quot;tags&quot; as |related|}}\n{{/get}}\n</code></pre>\n<p>This provides up to 5 related posts that match the tags of the post the reader is currently on, and excludes the current post from appearing in the featured block. Since these are related posts, block parameter syntax is used to name the data with <code>as |related|</code>.</p><h3 id=\"recently-published-posts\">Recently published posts</h3><p>The call to the get helper to feature your most recently published posts looks like this: <code>{{#get \"posts\" limit=\"3\"}}</code>. It's also useful to exclude the current post with a filter here too, and add the block parameter syntax for naming: </p><pre><code class=\"language-handlebars\">{{#get &quot;posts&quot; limit=&quot;3&quot; filter=&quot;id:-{{post.id}}&quot; as |recents|}}\n</code></pre>\n<h3 id=\"featured-posts\">Featured posts</h3><p>If you want to call posts that have been checked as featured from the Ghost editor in your block, use a filter parameter:</p><pre><code class=\"language-handlebars\">{{#get &quot;posts&quot; filter=&quot;featured:true+id:-{{post.id}}&quot; limit=&quot;3&quot; as |featured|}}\n</code></pre>\n<blockquote>Tip üí° the resource must always come first, and the block parameter to name the data must be last ‚Äì but parameters like <code>limit</code> and <code>filter</code> can be added in any order.</blockquote><h2 id=\"use-the-foreach-helper\">Use the <code>{{foreach}}</code> helper</h2><p>Now that you understand how to fetch the relevant data using one of the methods above in your partial template, the final step is to use the <code>{{foreach}}</code> <a href=\"https://docs.ghost.org/api/handlebars-themes/helpers/foreach/\">helper</a> to iterate the posts in your related posts block. For example, plugging this into the <code>partials/sidebar.hbs</code> for featured posts will look like this: </p><pre><code class=\"language-handlebars\">{{#get &quot;posts&quot; filter=&quot;featured:true&quot; limit=&quot;3&quot; as |featured|}}\n&lt;section class=&quot;featured-posts&quot;&gt;\n  &lt;h3&gt;Featured posts&lt;/h3&gt;\n  &lt;ol&gt;\n    {{#foreach featured}}\n    &lt;li&gt;&lt;a href=&quot;{{url}}&quot;&gt;{{title}}&lt;/a&gt;&lt;/li&gt;\n    {{/foreach}}\n  &lt;/ol&gt;\n&lt;/section&gt;\n{{/get}}\n</code></pre>\n<h3 id=\"using-else-as-a-fallback\">Using <code>{{else}}</code> as a fallback</h3><p>In the event that no posts match the filter, utilise the <code>{{else}}</code> <a href=\"https://docs.ghost.org/api/handlebars-themes/helpers/get/#using-else\">helper</a> to render alternative content and ensure that your readers aren't staring at an empty space. For example: </p><pre><code class=\"language-handlebars\">{{#get &quot;posts&quot; filter=&quot;featured:true&quot; limit=&quot;3&quot; as |featured|}}\n&lt;section class=&quot;featured-posts&quot;&gt;\n  &lt;h3&gt;Featured posts&lt;/h3&gt;\n  &lt;ol&gt;\n    {{#foreach featured}}\n    &lt;li&gt;&lt;a href=&quot;{{url}}&quot;&gt;{{title}}&lt;/a&gt;&lt;/li&gt;\n    {{/foreach}}\n  &lt;/ol&gt;\n&lt;/section&gt;\n{{else}}\n&lt;p&gt;Content for a fallback when no related posts are available.&lt;/p&gt;\n{{/get}}\n</code></pre>\n<p>This is just an example. You could feature pretty much anything here as a fallback... link to a static page on your site, add some text that describes what your publication is all about or insert your favourite meme - you do you!</p><h2 id=\"implement-your-new-templates\">Implement your new templates</h2><p>Once you've finished creating your partial template and made any necessary adjustments to your CSS files, update your site's active theme to get it up and running. The easiest way to implement a new theme is to upload the <code>.zip</code> file in Ghost Admin under the Design Settings menu. </p><figure class=\"kg-card kg-image-card\"><img src=\"https://docs.ghost.io/content/images/2018/11/Update-Ghost-Theme.png\" class=\"kg-image\"></figure><h3 id=\"summary\">Summary</h3><p>You've completed the tutorial and hopefully deployed a neat featured image block on your Ghost publication. Your new content block is a partial Handlebars template which can be used across any template in your theme when required. <br><br>Don't forget you can use the <a href=\"https://docs.ghost.org/api/handlebars-themes/\">Handlebars documentation</a> anytime to learn more about themes and access a full reference list of available helpers.</p>","custom_template":null,"url":"https://docs.ghost.io/related-posts-block/","uuid":"6ed0793f-0bac-4fc6-9d2e-b698c333b81c","page":false,"codeinjection_foot":"","codeinjection_head":"","comment_id":"5be28f8b23e4db00bfbf3f9f"}},"pageContext":{"slug":"related-posts-block","relatedPosts":[{"node":{"slug":"custom-rss-feed","title":"How to make an iTunes Podcast RSS feed with Ghost","url":"/tutorials/custom-rss-feed/","published_at":"2018-12-06T10:13:53.000+00:00","feature_image":null,"tags":[{"slug":"dynamic-routing","name":"Dynamic Routing","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"themes","name":"Themes","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"hash-tutorial","name":"#tutorial","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"google-custom-search","title":"Add Google Custom Search to Ghost","url":"/tutorials/google-custom-search/","published_at":"2018-11-15T12:04:42.000+00:00","feature_image":null,"tags":[{"slug":"themes","name":"Themes","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"hash-tutorial","name":"#tutorial","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"custom-amp-themes","title":"A complete guide to ‚ö° AMP templates in Ghost","url":"/tutorials/custom-amp-themes/","published_at":"2018-10-30T10:19:10.000+00:00","feature_image":null,"tags":[{"slug":"themes","name":"Themes","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"hash-tutorial","name":"#tutorial","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}},{"node":{"slug":"custom-page-templates","title":"Custom post templates","url":"/tutorials/custom-page-templates/","published_at":"2018-10-10T10:49:27.000+00:00","feature_image":"https://docs.ghost.io/content/images/2018/10/themes.svg","tags":[{"slug":"hash-tutorial","name":"#tutorial","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"themes","name":"Themes","description":null,"meta_title":null,"meta_description":null,"feature_image":null,"url":"/tutorials/themes/"}]}},{"node":{"slug":"creating-content-collections","title":"Building content collections with distinct routes","url":"/tutorials/creating-content-collections/","published_at":"2018-10-12T06:26:51.000+00:00","feature_image":"https://docs.ghost.io/content/images/2018/10/dynamic-routing-4.svg","tags":[{"slug":"hash-tutorial","name":"#tutorial","description":null,"meta_title":null,"meta_description":null,"feature_image":null},{"slug":"dynamic-routing","name":"Dynamic Routing","description":null,"meta_title":null,"meta_description":null,"feature_image":null}]}}],"section":"tutorials"}}